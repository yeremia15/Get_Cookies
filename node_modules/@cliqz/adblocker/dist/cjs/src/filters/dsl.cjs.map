{"version":3,"file":"dsl.cjs","sources":["../../../src/src/filters/dsl.js"],"sourcesContent":["/*!\n * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nclass HidingBuilder {\n}\nclass NetworkBuilder {\n    constructor() {\n        this.options = new Set();\n        this.prefix = undefined;\n        this.infix = undefined;\n        this.suffix = undefined;\n        this.redirect = undefined;\n    }\n    blockRequestsWithType(t) {\n        if (this.options.has(t)) {\n            throw new Error(`Already blocking type ${t}`);\n        }\n        this.options.add(t);\n        return this;\n    }\n    images() {\n        return this.blockRequestsWithType('image');\n    }\n    scripts() {\n        return this.blockRequestsWithType('script');\n    }\n    frames() {\n        return this.blockRequestsWithType('frame');\n    }\n    fonts() {\n        return this.blockRequestsWithType('font');\n    }\n    medias() {\n        return this.blockRequestsWithType('media');\n    }\n    styles() {\n        return this.blockRequestsWithType('css');\n    }\n    redirectTo(redirect) {\n        if (this.redirect !== undefined) {\n            throw new Error(`Already redirecting: ${this.redirect}`);\n        }\n        this.redirect = `redirect=${redirect}`;\n        return this;\n    }\n    urlContains(infix) {\n        if (this.infix !== undefined) {\n            throw new Error(`Already matching pattern: ${this.infix}`);\n        }\n        this.infix = infix;\n        return this;\n    }\n    urlStartsWith(prefix) {\n        if (this.prefix !== undefined) {\n            throw new Error(`Already matching prefix: ${this.prefix}`);\n        }\n        this.prefix = `|${prefix}`;\n        return this;\n    }\n    urlEndsWith(suffix) {\n        if (this.suffix !== undefined) {\n            throw new Error(`Already matching suffix: ${this.suffix}`);\n        }\n        this.suffix = `${suffix}|`;\n        return this;\n    }\n    withHostname(hostname) {\n        if (this.prefix !== undefined) {\n            throw new Error(`Cannot match hostname if filter already has prefix: ${this.prefix}`);\n        }\n        this.prefix = `||${hostname}^`;\n        return this;\n    }\n    toString() {\n        const parts = [];\n        if (this.prefix !== undefined) {\n            parts.push(this.prefix);\n        }\n        if (this.infix !== undefined) {\n            parts.push(this.infix);\n        }\n        if (this.suffix !== undefined) {\n            parts.push(this.suffix);\n        }\n        const options = ['important'];\n        if (this.options.size !== 0) {\n            for (const option of this.options) {\n                options.push(option);\n            }\n        }\n        if (this.redirect !== undefined) {\n            options.push(this.redirect);\n        }\n        return `${parts.length === 0 ? '*' : parts.join('*')}$${options.join(',')}`;\n    }\n}\nexport function block() {\n    return new NetworkBuilder();\n}\nexport function hide() {\n    return new HidingBuilder();\n}\n//# sourceMappingURL=dsl.js.map"],"names":[],"mappings":"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"}