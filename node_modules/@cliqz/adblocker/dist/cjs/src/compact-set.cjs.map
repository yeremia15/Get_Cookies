{"version":3,"file":"compact-set.cjs","sources":["../../src/src/compact-set.js"],"sourcesContent":["/*!\n * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nexport function compactTokens(tokens) {\n    const sorted = tokens.sort();\n    let lastIndex = 1;\n    for (let i = 1; i < sorted.length; i += 1) {\n        if (sorted[lastIndex - 1] !== sorted[i]) {\n            sorted[lastIndex++] = sorted[i];\n        }\n    }\n    return sorted.subarray(0, lastIndex);\n}\nexport function hasEmptyIntersection(s1, s2) {\n    let i = 0;\n    let j = 0;\n    while (i < s1.length && j < s2.length && s1[i] !== s2[j]) {\n        if (s1[i] < s2[j]) {\n            i += 1;\n        }\n        else {\n            j += 1;\n        }\n    }\n    return i === s1.length || j === s2.length;\n}\nconst EMPTY_UINT32_ARRAY = new Uint32Array(0);\nexport function concatTypedArrays(arrays) {\n    if (arrays.length === 0) {\n        return EMPTY_UINT32_ARRAY;\n    }\n    if (arrays.length === 1) {\n        return arrays[0];\n    }\n    let totalSize = 0;\n    for (let i = 0; i < arrays.length; i += 1) {\n        totalSize += arrays[i].length;\n    }\n    const result = new Uint32Array(totalSize);\n    let index = 0;\n    for (let i = 0; i < arrays.length; i += 1) {\n        const array = arrays[i];\n        for (let j = 0; j < array.length; j += 1) {\n            result[index++] = array[j];\n        }\n    }\n    return result;\n}\nexport function mergeCompactSets(arrays) {\n    return compactTokens(concatTypedArrays(arrays));\n}\n//# sourceMappingURL=compact-set.js.map"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,aAAa,CAAC,MAAM,EAAE;AACtC,IAAI,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,EAAE,CAAC;AACjC,IAAI,IAAI,SAAS,GAAG,CAAC,CAAC;AACtB,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;AAC/C,QAAQ,IAAI,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC,EAAE;AACjD,YAAY,MAAM,CAAC,SAAS,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AAC5C,SAAS;AACT,KAAK;AACL,IAAI,OAAO,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;AACzC,CAAC;AAcD,MAAM,kBAAkB,GAAG,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC;AACvC,SAAS,iBAAiB,CAAC,MAAM,EAAE;AAC1C,IAAI,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;AAC7B,QAAQ,OAAO,kBAAkB,CAAC;AAClC,KAAK;AACL,IAAI,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;AAC7B,QAAQ,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC;AACzB,KAAK;AACL,IAAI,IAAI,SAAS,GAAG,CAAC,CAAC;AACtB,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;AAC/C,QAAQ,SAAS,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;AACtC,KAAK;AACL,IAAI,MAAM,MAAM,GAAG,IAAI,WAAW,CAAC,SAAS,CAAC,CAAC;AAC9C,IAAI,IAAI,KAAK,GAAG,CAAC,CAAC;AAClB,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;AAC/C,QAAQ,MAAM,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AAChC,QAAQ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;AAClD,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACvC,SAAS;AACT,KAAK;AACL,IAAI,OAAO,MAAM,CAAC;AAClB;;;;;"}