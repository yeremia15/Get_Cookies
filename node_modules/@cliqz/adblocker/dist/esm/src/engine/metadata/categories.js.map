{"version":3,"file":"categories.js","sources":["../../../../src/src/engine/metadata/categories.js"],"sourcesContent":["/*!\n * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nimport { CompactMap } from '../map';\nimport { sizeOfUTF8 } from '../../data-view';\nimport { fastHash } from '../../utils';\nexport function isValid(category) {\n    if (category === null) {\n        return false;\n    }\n    if (typeof category !== 'object') {\n        return false;\n    }\n    const { key, name, color, description } = category;\n    if (typeof key !== 'string') {\n        return false;\n    }\n    if (typeof name !== 'string') {\n        return false;\n    }\n    if (typeof color !== 'string') {\n        return false;\n    }\n    if (typeof description !== 'string') {\n        return false;\n    }\n    return true;\n}\nexport function getKey(category) {\n    return fastHash(category.key);\n}\nexport function getSerializedSize(category) {\n    return (sizeOfUTF8(category.key) +\n        sizeOfUTF8(category.name) +\n        sizeOfUTF8(category.color) +\n        sizeOfUTF8(category.description));\n}\nexport function serialize(category, view) {\n    view.pushUTF8(category.key);\n    view.pushUTF8(category.name);\n    view.pushUTF8(category.color);\n    view.pushUTF8(category.description);\n}\nexport function deserialize(view) {\n    return {\n        key: view.getUTF8(),\n        name: view.getUTF8(),\n        color: view.getUTF8(),\n        description: view.getUTF8(),\n    };\n}\nexport function createMap(categories) {\n    return new CompactMap({\n        getSerializedSize,\n        getKeys: (category) => [getKey(category)],\n        serialize,\n        deserialize,\n        values: categories,\n    });\n}\n//# sourceMappingURL=categories.js.map"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAIO,SAAS,OAAO,CAAC,QAAQ,EAAE;AAClC,IAAI,IAAI,QAAQ,KAAK,IAAI,EAAE;AAC3B,QAAQ,OAAO,KAAK,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;AACtC,QAAQ,OAAO,KAAK,CAAC;AACrB,KAAK;AACL,IAAI,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,QAAQ,CAAC;AACvD,IAAI,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AACjC,QAAQ,OAAO,KAAK,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;AAClC,QAAQ,OAAO,KAAK,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AACnC,QAAQ,OAAO,KAAK,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE;AACzC,QAAQ,OAAO,KAAK,CAAC;AACrB,KAAK;AACL,IAAI,OAAO,IAAI,CAAC;AAChB,CAAC;AACM,SAAS,MAAM,CAAC,QAAQ,EAAE;AACjC,IAAI,OAAO,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AAClC,CAAC;AACM,SAAS,iBAAiB,CAAC,QAAQ,EAAE;AAC5C,IAAI,QAAQ,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC;AACpC,QAAQ,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC;AACjC,QAAQ,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC;AAClC,QAAQ,UAAU,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;AAC1C,CAAC;AACM,SAAS,SAAS,CAAC,QAAQ,EAAE,IAAI,EAAE;AAC1C,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AAChC,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACjC,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AAClC,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AACxC,CAAC;AACM,SAAS,WAAW,CAAC,IAAI,EAAE;AAClC,IAAI,OAAO;AACX,QAAQ,GAAG,EAAE,IAAI,CAAC,OAAO,EAAE;AAC3B,QAAQ,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE;AAC5B,QAAQ,KAAK,EAAE,IAAI,CAAC,OAAO,EAAE;AAC7B,QAAQ,WAAW,EAAE,IAAI,CAAC,OAAO,EAAE;AACnC,KAAK,CAAC;AACN,CAAC;AACM,SAAS,SAAS,CAAC,UAAU,EAAE;AACtC,IAAI,OAAO,IAAI,UAAU,CAAC;AAC1B,QAAQ,iBAAiB;AACzB,QAAQ,OAAO,EAAE,CAAC,QAAQ,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AACjD,QAAQ,SAAS;AACjB,QAAQ,WAAW;AACnB,QAAQ,MAAM,EAAE,UAAU;AAC1B,KAAK,CAAC,CAAC;AACP;;;;"}